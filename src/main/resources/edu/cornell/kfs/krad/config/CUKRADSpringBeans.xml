<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="cuAttachmentDaoOjb" parent="platformAwareDao" class="edu.cornell.kfs.krad.dao.impl.CuAttachmentDaoOjb"/>

    <bean id="dummyAntiVirusService" class="edu.cornell.kfs.krad.antivirus.service.impl.DummyAntiVirusServiceImpl" />

    <bean id="antiVirusService" class="edu.cornell.kfs.krad.antivirus.service.impl.ClamAVAntiVirusServiceImpl"
          p:host="${cu.antivirus.clamav.host}"
          p:port="${cu.antivirus.clamav.port}"
          p:timeout="${cu.antivirus.clamav.timeout}"/>

    <bean id="attachmentService" class="edu.cornell.kfs.krad.service.impl.CuAttachmentServiceImpl">
        <property name="kualiConfigurationService">
            <ref bean="configurationService" />
        </property>
        <property name="attachmentDao">
            <ref bean="cuAttachmentDaoOjb"/>
        </property>
        <property name="antiVirusService">
            <ref bean="${cu.antivirus.service}" />
        </property>
        <property name="noteService">
            <ref bean="noteService" />
        </property>
    </bean>

    <bean id="maintainableXMLConversionService" class="edu.cornell.kfs.krad.service.impl.NoOpMaintainableXMLConversionServiceImpl" />

    <bean id="cuMaintainableXMLConversionService" parent="cuMaintainableXMLConversionService-parentBean"/>
    <bean id="cuMaintainableXMLConversionService-parentBean" abstract="true"
          class="edu.cornell.kfs.krad.service.impl.CuMaintainableXMLConversionServiceImpl"
          p:conversionRuleFile="classpath:edu/cornell/kfs/krad/config/MaintainableXMLUpgradeRules.xml"/>

    <bean id="documentService" class="edu.cornell.kfs.krad.service.impl.CuDocumentServiceImpl"
          p:documentDao-ref="documentDao" p:dateTimeService-ref="dateTimeService"
          p:workflowDocumentService-ref="workflowDocumentService"
          p:documentHeaderService-ref="documentHeaderService"
          p:businessObjectService-ref="businessObjectService" p:noteService-ref="noteService"
          p:dataDictionaryService-ref="dataDictionaryService"
          p:kualiConfigurationService-ref="configurationService"
          p:maintainableXMLConversionService-ref="cuMaintainableXMLConversionService"/>

    <bean id="documentTypeAndRelationshipToNoteAuthorPermissionTypeService"
          class="edu.cornell.kfs.krad.kim.CuDocumentTypeAndRelationshipToNoteAuthorPermissionTypeService"/>

    <bean id="businessObjectAuthorizationService"
          class="edu.cornell.kfs.kns.service.impl.CuBusinessObjectAuthorizationServiceImpl"
          p:permissionService-ref="permissionService"/>
          
    <bean id="encryptionService" class="edu.cornell.kfs.core.impl.encryption.AESEncryptionServiceImpl">
        <property name="key" value="${cu.encryption.key}"/>
        <property name="enabled" value="${cu.encryption.busEncryption}"/>
    </bean>

</beans>
