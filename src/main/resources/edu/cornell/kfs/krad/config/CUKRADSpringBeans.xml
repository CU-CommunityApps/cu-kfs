<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean id="cuAttachmentDaoOjb" parent="platformAwareDao" class="edu.cornell.kfs.krad.dao.impl.CuAttachmentDaoOjb"/>

    <bean id="dummyAntiVirusService" class="edu.cornell.kfs.antivirus.service.impl.DummyAntiVirusServiceImpl" />

    <!--
        TODO: KFSPTS-21559: Update the "antiVirusService" bean for KEW-to-KFS compatibility
        and remove the temporary workaround below!
     -->

    <bean id="antiVirusService" parent="dummyAntiVirusService"/>

    <!--<bean id="antiVirusService" class="edu.cornell.cynergy.clamav.ClamAVService">
        <property name="host" value="127.0.0.1" />
        <property name="port" value="3310" />
        <property name="timeout" value="60000" />
    </bean>-->

    <bean id="attachmentService" class="edu.cornell.kfs.krad.service.impl.CuAttachmentServiceImpl">
        <property name="kualiConfigurationService">
            <ref bean="configurationService" />
        </property>
        <property name="attachmentDao">
            <ref bean="cuAttachmentDaoOjb"/>
        </property>
        <property name="antiVirusService">
            <ref bean="${cu.antivirus.service}" />
        </property>
        <property name="noteService">
            <ref bean="noteService" />
        </property>
    </bean>

    <bean id="maintainableXMLConversionService" class="edu.cornell.kfs.krad.service.impl.NoOpMaintainableXMLConversionServiceImpl" />

    <bean id="cuMaintainableXMLConversionService" parent="cuMaintainableXMLConversionService-parentBean"/>
    <bean id="cuMaintainableXMLConversionService-parentBean" abstract="true"
          class="edu.cornell.kfs.krad.service.impl.CuMaintainableXMLConversionServiceImpl"
          p:conversionRuleFile="classpath:edu/cornell/kfs/krad/config/MaintainableXMLUpgradeRules.xml"/>

    <bean id="documentService" class="edu.cornell.kfs.krad.service.impl.CuDocumentServiceImpl"
          p:documentDao-ref="documentDao" p:dateTimeService-ref="dateTimeService"
          p:workflowDocumentService-ref="workflowDocumentService"
          p:documentHeaderService-ref="documentHeaderService"
          p:businessObjectService-ref="businessObjectService" p:noteService-ref="noteService"
          p:dataDictionaryService-ref="dataDictionaryService"
          p:kualiConfigurationService-ref="configurationService"
          p:maintainableXMLConversionService-ref="cuMaintainableXMLConversionService"/>

    <bean id="documentTypeAndRelationshipToNoteAuthorPermissionTypeService"
          class="edu.cornell.kfs.krad.kim.CuDocumentTypeAndRelationshipToNoteAuthorPermissionTypeService"/>

    <bean id="businessObjectAuthorizationService"
          class="edu.cornell.kfs.kns.service.impl.CuBusinessObjectAuthorizationServiceImpl"/>

    <bean id="encryptionService" class="edu.cornell.kfs.core.impl.encryption.AESEncryptionServiceImpl">
        <property name="key" value="${cu.encryption.key}"/>
        <property name="enabled" value="${cu.encryption.busEncryption}"/>
    </bean>

</beans>
