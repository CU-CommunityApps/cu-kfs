<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
	xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
                           http://www.springframework.org/schema/tx
                           http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
                           http://www.springframework.org/schema/aop
                           http://www.springframework.org/schema/aop/spring-aop-2.0.xsd">

	<bean id="cu-rass" parent="rassModuleConfiguration-parentBean" />

	<bean id="rassModuleConfiguration-parentBean" class="org.kuali.kfs.sys.FinancialSystemModuleConfiguration"
		abstract="true">
		<property name="namespaceCode" value="KFS-RASS" />
		<property name="initializeDataDictionary" value="false" />
		<property name="packagePrefixes">
			<list>
				<value>edu.cornell.kfs.rass</value>
			</list>
		</property>
		<property name="dataDictionaryPackages">
			<list>
				<value>classpath:edu/cornell/kfs/rass/businessobject/datadictionary/*.xml
				</value>
			</list>
		</property>
		<property name="databaseRepositoryFilePaths">
			<list>
				<value>edu/cornell/kfs/rass/cu-ojb-rass.xml</value>
			</list>
		</property>
		<property name="jobNames">
			<list>
				<value>rassUpdateBatchJob</value>
			</list>
		</property>

		<property name="triggerNames">
			<list>

			</list>
		</property>

		<property name="batchFileDirectories">
			<list>
				<value>${reports.directory}/rass</value>
				<value>${staging.directory}/rass</value>
			</list>
		</property>

	</bean>

	<bean id="rassModuleService" parent="rassModuleService-parentBean" />

	<bean id="rassModuleService-parentBean" class="org.kuali.kfs.sys.service.impl.KfsModuleServiceImpl"
		abstract="true">
		<property name="moduleConfiguration" ref="cu-rass" />
	</bean>

	<bean id="rassService" parent="rassService-parentBean"/>
	<bean id="rassService-parentBean" abstract="true" class="edu.cornell.kfs.rass.batch.service.impl.RassServiceImpl"
			p:rassFilePath="${staging.directory}/rass"
			p:batchInputFileService-ref="batchInputFileService"
			p:batchInputFileType-ref="rassXmlInputFileType"
			p:fileStorageService-ref="fileStorageService"
			p:rassRoutingService-ref="rassRoutingService"
			p:dataDictionaryService-ref="dataDictionaryService"
			p:routeHeaderService-ref="enDocumentRouteHeaderService"
			p:agencyDefinition-ref="agencyDefinition"
			p:documentStatusCheckDelayMillis="1000"
			p:maxStatusCheckAttempts="60"/>

	<bean id="rassRoutingService" parent="rassRoutingService-parentBean"/>
	<bean id="rassRoutingService-parentBean" abstract="true" class="edu.cornell.kfs.rass.batch.service.impl.RassRoutingServiceImpl"
			p:maintenanceDocumentService-ref="maintenanceDocumentService"
			p:documentService-ref="documentService"
			p:dataDictionaryService-ref="dataDictionaryService"
			p:configurationService-ref="configurationService"/>

	<bean id="rassXmlInputFileType" parent="rassXmlInputFileType-parentBean"/>
	<bean id="rassXmlInputFileType-parentBean" abstract="true" class="edu.cornell.kfs.sys.batch.JAXBXmlBatchInputFileTypeBase"
			p:dateTimeService-ref="dateTimeService"
			p:cuMarshalService-ref="cuMarshalService"
			p:directoryPath="${staging.directory}/rass"
			p:fileExtension="xml"
			p:fileTypeIdentifier="rassXmlInputFileType"
			p:titleKey="message.batchUpload.title.rassXml"
			p:fileNamePrefix="rassXmlFile_"
			p:pojoClass="edu.cornell.kfs.rass.batch.xml.RassXmlDocumentWrapper"/>

	<bean id="rassStep" class="edu.cornell.kfs.rass.batch.RassStep"
		parent="step">
		<property name="rassService">
			<ref bean="rassService" />
		</property>
	</bean>

	<bean id="rassProperty" abstract="true" class="edu.cornell.kfs.rass.batch.RassPropertyDefinition"/>

	<bean id="agencyDefinition" parent="agencyDefinition-parentBean"/>
	<bean id="agencyDefinition-parentBean" abstract="true" class="edu.cornell.kfs.rass.batch.AgencyTranslationDefinition"
			p:agencyService-ref="agencyService"
			p:rootXmlObjectListPropertyName="agencies"
			p:documentTypeName="AGCY">
		<property name="propertyMappings">
			<list>
				<bean parent="rassProperty" p:xmlPropertyName="number" p:boPropertyName="agencyNumber" p:required="true"/>
				<bean parent="rassProperty" p:xmlPropertyName="reportingName" p:boPropertyName="reportingName" p:required="true"/>
				<bean parent="rassProperty" p:xmlPropertyName="fullName" p:boPropertyName="fullName" p:required="true"/>
				<bean parent="rassProperty" p:xmlPropertyName="typeCode" p:boPropertyName="agencyTypeCode" p:required="true"/>
				<bean parent="rassProperty" p:xmlPropertyName="reportsToAgencyNumber" p:boPropertyName="reportsToAgencyNumber" p:required="false"/>
				<bean parent="rassProperty" p:xmlPropertyName="commonName" p:boPropertyName="extension.agencyCommonName" p:required="false"/>
				<bean parent="rassProperty" p:xmlPropertyName="agencyOrigin" p:boPropertyName="extension.agencyOriginCode" p:required="false"/>
			</list>
		</property>
	</bean>

	<bean id="rassUpdateBatchJob" parent="unscheduledJobDescriptor">
		<property name="steps">
			<list>
				<ref bean="rassStep" />
			</list>
		</property>
	</bean>


</beans>